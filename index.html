<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Genz Clothing – Premium Streetwear</title>
  <meta name="description" content="Genz Clothing – premium streetwear and athleisure. Shop t‑shirts, hoodies, jeans, and accessories. Free shipping over ₹999. COD available." />
  <meta name="theme-color" content="#111827" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cpath fill='%23fff' d='M8 8h48v48H8z'/%3E%3Cpath fill='%23000' d='M16 20h32v4H16zm0 10h24v4H16zm0 10h16v4H16z'/%3E%3C/svg%3E" />
  <style>
    :root {
      --bg: #0b0e11;
      --card: #12171d;
      --muted: #9aa3af;
      --text: #f1f5f9;
      --accent: #22c55e; /* green */
      --accent-2: #60a5fa; /* blue */
      --danger: #ef4444;
      --warning: #f59e0b;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    * { box-sizing: border-box }
    html, body { margin:0; padding:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; background: var(--bg); color: var(--text); }
    a { color: inherit; text-decoration: none }
    img { max-width: 100%; display: block }
    button { cursor: pointer; font: inherit }
    input, select { background: #0e1318; border: 1px solid #1f2937; color: var(--text); padding: 10px 12px; border-radius: 10px; outline: none }
    .container { width: min(1200px, 92vw); margin: 0 auto }
    .hidden { display: none !important }
    .sr-only { position: absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0 }
    /* Topbar */
    .topbar { background: linear-gradient(90deg,#0b0e11,#0e1318); border-bottom:1px solid #1f2937 }
    .topbar-inner { display:flex; align-items:center; gap:14px; padding: 10px 0; font-size: 14px; color: var(--muted) }
    .badge { display:inline-flex; align-items:center; gap:6px; background:#0f172a; padding: 4px 10px; border-radius:999px; border:1px solid #1f2937 }
    .badge .dot { width:8px; height:8px; border-radius:999px; background: var(--accent) }

    /* Header */
    header { position: sticky; top: 0; z-index: 40; backdrop-filter: blur(10px); background: rgba(11,14,17,.8); border-bottom:1px solid #1f2937 }
    .nav { display:flex; align-items:center; justify-content:space-between; gap: 12px; padding: 14px 0 }
    .brand { display:flex; align-items:center; gap:10px; font-weight: 800; letter-spacing: .5px }
    .brand-logo { width:36px; height:36px; border-radius:10px; background: conic-gradient(from 180deg at 50% 50%, #22c55e 0deg, #60a5fa 120deg, #f43f5e 240deg, #22c55e 360deg); box-shadow: var(--shadow) }
    .brand span { font-size: 20px }
    .nav-actions { display:flex; align-items:center; gap:10px }
    .search { flex: 1; display:flex; align-items:center; gap:8px; background:#0f172a; padding: 8px; border:1px solid #1f2937; border-radius: 12px; max-width: 520px }
    .search input { border: none; flex: 1; background: transparent }
    .icon-btn { background:#0f172a; border:1px solid #1f2937; padding:10px 12px; border-radius: 12px; display:inline-flex; align-items:center; gap:8px }
    .icon-btn[data-count]::after { content: attr(data-count); display:inline-grid; place-items:center; min-width:18px; height:18px; font-size:12px; background:#ef4444; color:white; border-radius:999px; margin-left:-6px; margin-top:-12px; padding:0 4px }

    /* Mega menu */
    .menu { display:flex; align-items:center; gap:18px; font-size: 15px; padding: 10px 0 14px; }
    .menu a { color: #e5e7eb }
    .mega { position: relative }
    .mega-panel { position:absolute; left:0; right:0; background:#0b0f15; border:1px solid #1f2937; border-radius: 16px; padding: 18px; display:none; box-shadow: var(--shadow) }
    .mega:hover .mega-panel, .mega:focus-within .mega-panel { display:block }
    .mega-grid { display:grid; grid-template-columns: repeat(4, 1fr); gap: 16px }
    .chip { background:#0f172a; border:1px solid #1f2937; padding:8px 10px; border-radius:999px; display:inline-flex; gap:8px; align-items:center; font-size: 13px }

    /* Layout */
    .grid { display:grid; grid-template-columns: 260px 1fr; gap: 20px; margin-top: 12px }

    /* Sidebar filters */
    .card { background: var(--card); border:1px solid #1f2937; border-radius: var(--radius); box-shadow: var(--shadow) }
    .card h3 { margin:0 0 8px; font-size: 16px; letter-spacing: .3px }
    .card .section { padding: 14px 16px; border-top:1px solid #1f2937 }
    .card .section:first-child { border-top: none }
    .range { display:flex; gap:10px; align-items:center }

    /* Product grid */
    .products { display:grid; grid-template-columns: repeat(3, 1fr); gap: 18px }
    .product { background: linear-gradient(180deg,#10151c,#0f141a); border:1px solid #1f2937; border-radius: 18px; overflow: hidden; display:flex; flex-direction:column }
    .product .img-wrap { position:relative; aspect-ratio: 4/5; overflow:hidden }
    .product .img-wrap img { width:100%; height:100%; object-fit:cover; transition: transform .5s }
    .product:hover .img-wrap img { transform: scale(1.05) }
    .product .tag { position:absolute; top:10px; left:10px; background: #22c55e; color: black; font-weight: 700; padding:4px 8px; border-radius: 999px; font-size: 12px }
    .product .content { padding: 12px 14px; display:grid; gap:6px }
    .price { display:flex; align-items:center; gap:8px }
    .price s { color:#64748b; font-size: 14px }
    .price .off { color: var(--accent); font-size: 12px; padding:2px 6px; border-radius:999px; background:#052e1a; border:1px solid #134e32 }
    .actions { display:flex; gap:8px; margin-top:8px }
    .btn { background:#111827; border:1px solid #1f2937; color: #e5e7eb; padding:10px 12px; border-radius:12px }
    .btn.primary { background: linear-gradient(90deg,#22c55e,#16a34a); color:#001b0a; font-weight:800 }
    .btn.ghost { background:#0f172a }

    .toolbar { display:flex; align-items:center; justify-content:space-between; gap:10px; margin: 10px 0 6px }
    .breadcrumbs { color: #94a3b8; font-size: 14px }

    /* Drawer / Modal */
    .overlay { position: fixed; inset:0; background: rgba(0,0,0,.5); display:none; z-index: 60 }
    .overlay.show { display:block }
    .drawer { position: fixed; right: -420px; top:0; bottom:0; width: 400px; background: var(--card); border-left:1px solid #1f2937; box-shadow: var(--shadow); transition: right .3s ease; z-index: 70; display:flex; flex-direction:column }
    .drawer.show { right:0 }
    .drawer header { position: sticky; top:0; background: var(--card); padding: 14px; border-bottom:1px solid #1f2937 }
    .drawer .content { padding: 14px; overflow:auto; flex:1; display:grid; gap:10px }
    .line { display:flex; align-items:center; justify-content:space-between; gap:10px }

    .modal { position: fixed; inset:0; display:none; place-items:center; z-index: 80 }
    .modal.show { display:grid }
    .modal .panel { width:min(920px, 94vw); background: var(--card); border:1px solid #1f2937; border-radius: 18px; box-shadow: var(--shadow); overflow:hidden }
    .panel .body { display:grid; grid-template-columns: 1fr 1fr; gap: 18px; padding: 16px }
    .panel header { padding: 12px 16px; border-bottom:1px solid #1f2937; display:flex; align-items:center; justify-content:space-between }

    /* Tabs */
    .tabs { display:flex; gap:4px; background:#0f172a; border:1px solid #1f2937; padding:4px; border-radius:12px }
    .tabs button { flex:1; padding:8px 10px; border-radius:8px; border:none; background:transparent; color:#cbd5e1 }
    .tabs button.active { background:#0b0f15; color:#fff; font-weight:700 }

    /* Utilities */
    .mt-1{margin-top:4px}.mt-2{margin-top:8px}.mt-3{margin-top:12px}.mt-4{margin-top:16px}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .pill{padding:6px 10px;border-radius:999px;background:#0f172a;border:1px solid #1f2937;color:#cbd5e1}

    footer { margin-top: 40px; background: #0f1319; border-top:1px solid #1f2937; }
    .footer-grid { display:grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 16px; padding: 24px 0 }
    .credit { color:#94a3b8; font-size: 13px; border-top:1px solid #1f2937; padding: 12px 0; text-align:center }

    /* Responsive */
    @media (max-width: 980px) {
      .grid { grid-template-columns: 1fr; }
      .products { grid-template-columns: repeat(2, 1fr) }
      .panel .body { grid-template-columns: 1fr }
      .mega-panel { position: fixed; left: 10px; right: 10px; top: 120px; }
      .footer-grid { grid-template-columns: 1fr 1fr }
    }
    @media (max-width: 620px) {
      .nav { flex-wrap: wrap }
      .search { order: 3; width: 100% }
      .products { grid-template-columns: 1fr }
      .footer-grid { grid-template-columns: 1fr }
    }
  </style>
</head>
<body>
  <!-- Topbar -->
  <div class="topbar">
    <div class="container topbar-inner">
      <span class="badge" title="Free shipping threshold"><span class="dot"></span> Free shipping over ₹999</span>
      <span class="badge" title="COD available"><span class="dot" style="background:#60a5fa"></span> COD + Easy returns</span>
      <span class="badge" title="Delivery"><span class="dot" style="background:#f59e0b"></span> Delivery in 3–5 days</span>
      <span class="badge" title="Offer"><span class="dot" style="background:#f43f5e"></span> FEST10: Extra 10% off</span>
    </div>
  </div>

  <!-- Header -->
  <header>
    <div class="container nav" role="navigation" aria-label="Primary">
      <a class="brand" href="#" aria-label="Genz Clothing home">
        <div class="brand-logo" aria-hidden="true"></div>
        <span>Genz Clothing</span>
      </a>
      <div class="menu" id="megaMenu">
        <div class="mega"><a href="#" aria-haspopup="true">Men</a>
          <div class="mega-panel">
            <div class="mega-grid">
              <div>
                <h4>Tops</h4>
                <div class="mt-2">
                  <a class="pill" data-filter="category:Men|T-Shirts" href="#">Oversized Tees</a>
                  <a class="pill" data-filter="category:Men|Shirts" href="#">Casual Shirts</a>
                  <a class="pill" data-filter="category:Men|Hoodies" href="#">Hoodies</a>
                </div>
              </div>
              <div>
                <h4>Bottoms</h4>
                <div class="mt-2">
                  <a class="pill" data-filter="category:Men|Jeans" href="#">Jeans</a>
                  <a class="pill" data-filter="category:Men|Joggers" href="#">Joggers</a>
                </div>
              </div>
              <div>
                <h4>Collections</h4>
                <div class="mt-2">
                  <a class="pill" data-filter="tag:New" href="#">New Arrivals</a>
                  <a class="pill" data-filter="tag:Bestseller" href="#">Bestsellers</a>
                  <a class="pill" data-filter="tag:Sale" href="#">Sale</a>
                </div>
              </div>
              <div>
                <h4>Accessories</h4>
                <div class="mt-2">
                  <a class="pill" data-filter="category:Men|Accessories" href="#">Caps</a>
                  <a class="pill" data-filter="category:Men|Accessories" href="#">Socks</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="mega"><a href="#" aria-haspopup="true">Women</a>
          <div class="mega-panel">
            <div class="mega-grid">
              <div>
                <h4>Tops</h4>
                <div class="mt-2">
                  <a class="pill" data-filter="category:Women|T-Shirts" href="#">Boyfriend Tees</a>
                  <a class="pill" data-filter="category:Women|Hoodies" href="#">Hoodies</a>
                </div>
              </div>
              <div>
                <h4>Bottoms</h4>
                <div class="mt-2">
                  <a class="pill" data-filter="category:Women|Jeans" href="#">Jeans</a>
                  <a class="pill" data-filter="category:Women|Joggers" href="#">Joggers</a>
                </div>
              </div>
              <div>
                <h4>Collections</h4>
                <div class="mt-2">
                  <a class="pill" data-filter="tag:New" href="#">New Arrivals</a>
                  <a class="pill" data-filter="tag:Sustainable" href="#">Sustainable</a>
                </div>
              </div>
              <div>
                <h4>Accessories</h4>
                <div class="mt-2">
                  <a class="pill" data-filter="category:Women|Accessories" href="#">Tote Bags</a>
                  <a class="pill" data-filter="category:Women|Accessories" href="#">Belts</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <a href="#" data-open="trackOrderModal">Track Order</a>
        <a href="#" data-open="faqModal">Help</a>
      </div>

      <div class="nav-actions">
        <div class="search" role="search">
          <input id="searchInput" placeholder="Search products, e.g. oversized tee" aria-label="Search products" />
          <button class="icon-btn" id="btnSearch" aria-label="Search">🔍</button>
        </div>
        <button class="icon-btn" id="btnTheme" title="Toggle theme">🌓</button>
        <button class="icon-btn" id="btnAccount" data-open="authModal" aria-label="Account">👤</button>
        <button class="icon-btn" id="btnWishlist" aria-label="Wishlist">♡</button>
        <button class="icon-btn" id="btnCart" data-count="0" aria-label="Cart">🛒</button>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="toolbar">
      <div class="breadcrumbs">Home / <b>Shop</b></div>
      <div class="grid-2" style="max-width: 420px">
        <select id="sortSelect" title="Sort products">
          <option value="pop">Sort: Popular</option>
          <option value="new">Newest</option>
          <option value="low">Price: Low to High</option>
          <option value="high">Price: High to Low</option>
          <option value="rating">Top Rated</option>
        </select>
        <select id="currencySelect" title="Currency">
          <option value="INR">INR (₹)</option>
          <option value="USD">USD ($)</option>
        </select>
      </div>
    </div>

    <div class="grid">
      <!-- Filters sidebar -->
      <aside>
        <div class="card">
          <div class="section">
            <h3>Filters</h3>
            <button class="btn" id="clearFilters">Clear all</button>
          </div>
          <div class="section">
            <h4>Category</h4>
            <div class="mt-2">
              <label><input type="checkbox" class="f-cat" value="Men|T-Shirts"> Men · T‑Shirts</label><br/>
              <label><input type="checkbox" class="f-cat" value="Men|Hoodies"> Men · Hoodies</label><br/>
              <label><input type="checkbox" class="f-cat" value="Women|T-Shirts"> Women · T‑Shirts</label><br/>
              <label><input type="checkbox" class="f-cat" value="Women|Jeans"> Women · Jeans</label><br/>
              <label><input type="checkbox" class="f-cat" value="Unisex|Accessories"> Unisex · Accessories</label>
            </div>
          </div>
          <div class="section">
            <h4>Size</h4>
            <div class="mt-2">
              <label><input type="checkbox" class="f-size" value="S"> S</label>
              <label><input type="checkbox" class="f-size" value="M"> M</label>
              <label><input type="checkbox" class="f-size" value="L"> L</label>
              <label><input type="checkbox" class="f-size" value="XL"> XL</label>
            </div>
          </div>
          <div class="section">
            <h4>Price</h4>
            <div class="range mt-2">
              <input type="number" id="minPrice" placeholder="Min" min="0" value="0" style="width:100%">
              <span>—</span>
              <input type="number" id="maxPrice" placeholder="Max" min="0" value="3999" style="width:100%">
            </div>
            <button class="btn mt-2" id="applyPrice">Apply</button>
          </div>
          <div class="section">
            <h4>Tags</h4>
            <div class="mt-2">
              <label><input type="checkbox" class="f-tag" value="New"> New</label>
              <label><input type="checkbox" class="f-tag" value="Bestseller"> Bestseller</label>
              <label><input type="checkbox" class="f-tag" value="Sale"> Sale</label>
              <label><input type="checkbox" class="f-tag" value="Sustainable"> Sustainable</label>
            </div>
          </div>
          <div class="section">
            <h4>Delivery</h4>
            <div class="mt-2 grid-2">
              <input id="pincode" placeholder="Enter PIN code" maxlength="6">
              <button class="btn" id="checkPin">Check</button>
            </div>
            <div id="pinMsg" class="mt-2" style="color:#94a3b8"></div>
          </div>
        </div>
      </aside>

      <!-- Product grid -->
      <section>
        <div id="resultCount" class="mt-2" style="color:#94a3b8">Loading products…</div>
        <div class="products mt-2" id="productGrid" aria-live="polite"></div>
      </section>
    </div>

    <!-- Trust badges -->
    <div class="grid-3 mt-4">
      <div class="card" style="padding:14px"><b>Secure payments</b><div class="mt-1">UPI / Cards / NetBanking</div></div>
      <div class="card" style="padding:14px"><b>Easy returns</b><div class="mt-1">10‑day return policy</div></div>
      <div class="card" style="padding:14px"><b>Support</b><div class="mt-1">Whatsapp + Email</div></div>
    </div>
  </main>

  <!-- Cart Drawer -->
  <div class="overlay" id="overlay"></div>
  <aside class="drawer" id="cartDrawer" aria-label="Cart">
    <header class="line">
      <strong>Cart</strong>
      <button class="btn" id="closeCart">✕</button>
    </header>
    <div class="content" id="cartItems"></div>
    <div class="section" style="padding:14px; border-top:1px solid #1f2937">
      <div class="line"><span>Subtotal</span><b id="cartSubtotal">₹0</b></div>
      <div class="line"><span>Shipping</span><span id="shipInfo">Free over ₹999</span></div>
      <div class="line"><span>Coupon</span>
        <div class="grid-2" style="width:100%">
          <input id="coupon" placeholder="Enter code e.g. FEST10">
          <button class="btn" id="applyCoupon">Apply</button>
        </div>
      </div>
      <div class="line mt-2"><span>Total</span><b id="cartTotal">₹0</b></div>
      <button class="btn primary mt-2" id="checkoutBtn">Checkout</button>
      <div class="mt-2" style="color:#94a3b8; font-size:13px">GST included. COD fee ₹49 if applicable.</div>
    </div>
  </aside>

  <!-- Product Modal -->
  <div class="modal" id="productModal" role="dialog" aria-modal="true">
    <div class="panel">
      <header>
        <b id="pmName">Product</b>
        <button class="btn" data-close="productModal">✕</button>
      </header>
      <div class="body"> y
        <div>
          <img id="pmImg" alt="Product image" />
          <div class="mt-2">
            <div class="tabs" role="tablist">
              <button class="active" data-tab="desc">Description</button>
              <button data-tab="details">Details</button>
              <button data-tab="care">Care</button>
            </div>
            <div id="tabContent" class="mt-2" style="color:#cbd5e1; font-size:14px"></div>
          </div>
        </div>
        <div>
          <div class="price"><b id="pmPrice">₹0</b> <s id="pmMrp"></s> <span class="off" id="pmOff"></span></div>
          <div class="mt-2">
            <label for="pmSize">Size</label>
            <div class="mt-1" id="pmSizes"></div>
          </div>
          <div class="mt-2 grid-2">
            <button class="btn primary" id="pmAdd">Add to Cart</button>
            <button class="btn" id="pmWish">♡ Wishlist</button>
          </div>
          <div class="mt-3">
            <div class="pill">Free shipping over ₹999 · 10‑day returns</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Auth Modal -->
  <div class="modal" id="authModal" role="dialog" aria-modal="true">
    <div class="panel" style="width:min(520px,94vw)">
      <header>
        <b>Sign in to Genz</b>
        <button class="btn" data-close="authModal">✕</button>
      </header>
      <div class="body" style="display:block">
        <div class="tabs" role="tablist">
          <button class="active" data-auth="login">Login</button>
          <button data-auth="signup">Create Account</button>
        </div>
        <form id="loginForm" class="mt-3">
          <div class="grid-2">
            <input required type="email" placeholder="Email" id="loginEmail"/>
            <input required type="password" placeholder="Password" id="loginPass"/>
          </div>
          <button class="btn primary mt-2" type="submit">Login</button>
          <div class="mt-1" style="color:#94a3b8; font-size:13px">By continuing, you agree to our T&C and Privacy Policy.</div>
        </form>
        <form id="signupForm" class="mt-3 hidden">
          <div class="grid-2">
            <input required type="text" placeholder="Full name" id="suName"/>
            <input required type="email" placeholder="Email" id="suEmail"/>
          </div>
          <div class="grid-2 mt-2">
            <input required type="password" placeholder="Password" id="suPass"/>
            <input type="text" placeholder="Referral code (optional)"/>
          </div>
          <button class="btn primary mt-2" type="submit">Create account</button>
        </form>
      </div>
    </div>
  </div>

  <!-- FAQ Modal -->
  <div class="modal" id="faqModal" role="dialog" aria-modal="true">
    <div class="panel" style="width:min(820px,94vw)">
      <header>
        <b>Help & FAQs</b>
        <button class="btn" data-close="faqModal">✕</button>
      </header>
      <div class="body" style="display:block; padding:16px">
        <details open>
          <summary>What are the shipping charges?</summary>
          <div class="mt-1">Shipping is free on orders above ₹999, otherwise ₹79.</div>
        </details>
        <details class="mt-2">
          <summary>How to return?</summary>
          <div class="mt-1">Initiate return within 10 days from Orders → Return. Pickup in 48–72 hours.</div>
        </details>
        <details class="mt-2">
          <summary>Do you support COD?</summary>
          <div class="mt-1">Yes, COD is available with a flat ₹49 fee.</div>
        </details>
      </div>
    </div>
  </div>

  <!-- Track Order Modal -->
  <div class="modal" id="trackOrderModal" role="dialog" aria-modal="true">
    <div class="panel" style="width:min(620px,94vw)">
      <header>
        <b>Track your order</b>
        <button class="btn" data-close="trackOrderModal">✕</button>
      </header>
      <div class="body" style="display:block">
        <div class="grid-2">
          <input id="trackEmail" placeholder="Email or Phone" />
          <input id="trackId" placeholder="Order ID (e.g. GENZ12345)" />
        </div>
        <button class="btn primary mt-2" id="btnTrack">Track</button>
        <div id="trackResult" class="mt-2" style="color:#94a3b8"></div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container footer-grid">
      <div>
        <div class="brand"><div class="brand-logo"></div><span>Genz Clothing</span></div>
        <p class="mt-2" style="color:#94a3b8">Premium streetwear designed in India. Sustainable fabrics, limited drops, and everyday essentials.</p>
        <form id="newsletter" class="mt-2 grid-2" style="max-width:420px">
          <input type="email" id="newsEmail" placeholder="Enter your email" required />
          <button class="btn primary" type="submit">Subscribe</button>
        </form>
      </div>
      <div>
        <b>Shop</b>
        <div class="mt-2"><a href="#">Men</a></div>
        <div class="mt-1"><a href="#">Women</a></div>
        <div class="mt-1"><a href="#">New Arrivals</a></div>
        <div class="mt-1"><a href="#">Sale</a></div>
      </div>
      <div>
        <b>Company</b>
        <div class="mt-2"><a href="#">About</a></div>
        <div class="mt-1"><a href="#">Careers</a></div>
        <div class="mt-1"><a href="#">Affiliates</a></div>
      </div>
      <div>
        <b>Support</b>
        <div class="mt-2"><a href="#" data-open="faqModal">Help Center</a></div>
        <div class="mt-1"><a href="#" data-open="trackOrderModal">Track Order</a></div>
        <div class="mt-1"><a href="#" data-open="authModal">My Account</a></div>
        <div class="mt-1"><a href="#">Contact</a></div>
      </div>
    </div>
    <div class="container credit">© <span id="year"></span> Genz Clothing. All rights reserved · Privacy · Terms</div>
  </footer>

  <script>
    // ===== UTIL =====
    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => Array.from(el.querySelectorAll(q));
    const fmtINR = n => new Intl.NumberFormat('en-IN', { style:'currency', currency: state.currency }).format(n * (state.currency==='USD'? 1/86 : 1));
    const uid = () => Math.random().toString(36).slice(2);

    // ===== DATA =====
    const products = [
      {id:'p1', name:'Oversized Graphic Tee – Neon Wave', cat:'Men|T-Shirts', price:899, mrp:1299, rating:4.6, tags:['New','Bestseller'], sizes:['S','M','L','XL'], img:'https://images.unsplash.com/photo-1520975793416-35cf6c521bf8?q=80&w=800&auto=format&fit=crop', desc:'Ultra-soft 240 GSM cotton. Boxy fit. Screen-printed graphic.'},
      {id:'p2', name:'Heavyweight Hoodie – Midnight', cat:'Men|Hoodies', price:1799, mrp:2299, rating:4.8, tags:['Bestseller'], sizes:['M','L','XL'], img:'https://images.unsplash.com/photo-1547623542-5610da1ac5f9?q=80&w=800&auto=format&fit=crop', desc:'Brushed fleece inside. Kangaroo pocket. Minimal branding.'},
      {id:'p3', name:'Boyfriend Tee – Cloud', cat:'Women|T-Shirts', price:799, mrp:1199, rating:4.4, tags:['Sustainable'], sizes:['S','M','L'], img:'https://images.unsplash.com/photo-1520975916090-3105956dac38?q=80&w=800&auto=format&fit=crop', desc:'Relaxed fit organic cotton tee. Everyday essential.'},
      {id:'p4', name:'Straight Fit Jeans – Indigo', cat:'Women|Jeans', price:1999, mrp:2599, rating:4.5, tags:['New'], sizes:['S','M','L'], img:'https://images.unsplash.com/photo-1503341455253-b2e723bb3dbb?q=80&w=800&auto=format&fit=crop', desc:'High-rise straight fit denim with stretch for comfort.'},
      {id:'p5', name:'Joggers – Asphalt', cat:'Men|Joggers', price:1499, mrp:1899, rating:4.3, tags:['Sale'], sizes:['M','L','XL'], img:'https://images.unsplash.com/photo-1612423284934-2850d0a2d1c8?q=80&w=800&auto=format&fit=crop', desc:'Tapered fit premium terry. Zippered pockets.'},
      {id:'p6', name:'Corduroy Cap – Olive', cat:'Unisex|Accessories', price:599, mrp:999, rating:4.1, tags:['New','Sale'], sizes:['OS'], img:'https://images.unsplash.com/photo-1520975940200-78d85547b4dc?q=80&w=800&auto=format&fit=crop', desc:'Adjustable strapback. Embroidered logo.'}
    ];

    const state = {
      currency: localStorage.getItem('currency') || 'INR',
      cart: JSON.parse(localStorage.getItem('cart')||'[]'),
      wishlist: JSON.parse(localStorage.getItem('wishlist')||'[]'),
      filters: { cats:new Set(), sizes:new Set(), tags:new Set(), min:0, max:3999, q:'', sort:'pop' },
      selectedProduct: null,
      coupon: null
    };

    // ===== RENDER =====
    function renderProducts(){
      let list = products.slice();
      const f = state.filters;
      if(f.q) list = list.filter(p=> p.name.toLowerCase().includes(f.q) || p.cat.toLowerCase().includes(f.q));
      if(f.cats.size) list = list.filter(p=> f.cats.has(p.cat));
      if(f.sizes.size) list = list.filter(p=> p.sizes.some(s=>f.sizes.has(s)));
      if(f.tags.size) list = list.filter(p=> p.tags.some(t=>f.tags.has(t)));
      list = list.filter(p=> p.price>=f.min && p.price<=f.max);
      switch(f.sort){
        case 'new': list.sort((a,b)=> a.id<b.id?1:-1); break;
        case 'low': list.sort((a,b)=> a.price-b.price); break;
        case 'high': list.sort((a,b)=> b.price-a.price); break;
        case 'rating': list.sort((a,b)=> b.rating-a.rating); break;
        default: list.sort((a,b)=> b.rating*10 + (b.mrp-b.price) - (a.rating*10 + (a.mrp-a.price)) );
      }
      const grid = $('#productGrid');
      grid.innerHTML = '';
      $('#resultCount').textContent = `${list.length} products`;
      list.forEach(p=>{
        const off = Math.round((1 - p.price/p.mrp)*100);
        const inWish = state.wishlist.includes(p.id);
        const el = document.createElement('article');
        el.className = 'product';
        el.innerHTML = `
          <div class="img-wrap">
            <img src="${p.img}" alt="${p.name}">
            ${off>0?`<span class='tag'>-${off}%</span>`:''}
          </div>
          <div class="content">
            <div style="display:flex;justify-content:space-between;gap:8px">
              <div>
                <div style="font-weight:700">${p.name}</div>
                <div style="color:#94a3b8;font-size:13px">${p.cat.replace('|',' · ')} · ★ ${p.rating}</div>
              </div>
              <button class="btn ghost" aria-label="Wishlist" data-wish="${p.id}">${inWish?'♥':'♡'}</button>
            </div>
            <div class="price"><b>${fmtINR(p.price)}</b> <s>${fmtINR(p.mrp)}</s> ${off?`<span class="off">${off}% off</span>`:''}</div>
            <div class="actions">
              <button class="btn" data-quick="${p.id}">Quick view</button>
              <button class="btn primary" data-add="${p.id}">Add to cart</button>
            </div>
          </div>`;
        grid.appendChild(el);
      });
    }

    function renderCart(){
      const box = $('#cartItems');
      box.innerHTML = '';
      let sub = 0;
      state.cart.forEach(item=>{
        const p = products.find(x=>x.id===item.id);
        if(!p) return;
        const line = document.createElement('div');
        line.className = 'card';
        line.style.padding = '10px';
        const lineTotal = p.price * item.qty;
        sub += lineTotal;
        line.innerHTML = `
          <div class="line">
            <div style="display:flex;gap:10px;align-items:center">
              <img src="${p.img}" alt="${p.name}" style="width:56px;height:56px;object-fit:cover;border-radius:10px;border:1px solid #1f2937">
              <div>
                <div><b>${p.name}</b></div>
                <div style="color:#94a3b8;font-size:13px">Size ${item.size} · ${fmtINR(p.price)} × ${item.qty}</div>
              </div>
            </div>
            <button class="btn" data-remove="${item.key}">✕</button>
          </div>
          <div class="line mt-1">
            <div>
              <button class="btn" data-step="-1" data-key="${item.key}">−</button>
              <span style="padding:0 8px">${item.qty}</span>
              <button class="btn" data-step="1" data-key="${item.key}">+</button>
            </div>
            <b>${fmtINR(lineTotal)}</b>
          </div>`;
        box.appendChild(line);
      });
      const ship = sub >= 999 ? 0 : 79;
      const couponOff = state.coupon==='FEST10' ? sub*0.10 : 0;
      const total = Math.max(sub - couponOff + ship, 0);
      $('#cartSubtotal').textContent = fmtINR(sub);
      $('#shipInfo').textContent = ship===0? 'Free' : fmtINR(ship);
      $('#cartTotal').textContent = fmtINR(total);
      $('#btnCart').setAttribute('data-count', String(state.cart.reduce((a,c)=>a+c.qty,0)));
      localStorage.setItem('cart', JSON.stringify(state.cart));
    }

    function openDrawer(){ $('#overlay').classList.add('show'); $('#cartDrawer').classList.add('show'); }
    function closeDrawer(){ $('#overlay').classList.remove('show'); $('#cartDrawer').classList.remove('show'); }
    function openModal(id){ $('#overlay').classList.add('show'); $('#'+id).classList.add('show'); }
    function closeModal(id){ $('#overlay').classList.remove('show'); $('#'+id).classList.remove('show'); }

    function openProduct(id){
      const p = products.find(x=>x.id===id);
      if(!p) return;
      state.selectedProduct = p;
      $('#pmName').textContent = p.name;
      $('#pmImg').src = p.img; $('#pmImg').alt = p.name;
      const off = Math.round((1 - p.price/p.mrp)*100);
      $('#pmPrice').textContent = fmtINR(p.price);
      $('#pmMrp').textContent = fmtINR(p.mrp);
      $('#pmOff').textContent = off? off+"% off" : '';
      const sizes = $('#pmSizes'); sizes.innerHTML = '';
      p.sizes.forEach(s=>{
        const b = document.createElement('button');
        b.className = 'btn'; b.textContent = s; b.dataset.size = s;
        b.addEventListener('click', ()=> { $$('#pmSizes .btn').forEach(x=>x.classList.remove('primary')); b.classList.add('primary'); b.dataset.sel='1'; });
        sizes.appendChild(b);
      });
      $('#tabContent').textContent = p.desc + ' · 240 GSM cotton · Made in India.';
      openModal('productModal');
    }

    // ===== EVENTS =====
    document.addEventListener('click', (e)=>{
      const t = e.target;
      if(!(t instanceof HTMLElement)) return;
      if(t.matches('[data-add]')){
        const id = t.getAttribute('data-add');
        const p = products.find(x=>x.id===id);
        const size = (p.sizes[0]||'OS');
        const key = uid();
        state.cart.push({ key, id, qty:1, size });
        renderCart(); openDrawer();
      }
      if(t.matches('[data-quick]')){ openProduct(t.getAttribute('data-quick')); }
      if(t.matches('[data-wish]')){
        const id = t.getAttribute('data-wish');
        const i = state.wishlist.indexOf(id);
        if(i>-1) state.wishlist.splice(i,1); else state.wishlist.push(id);
        localStorage.setItem('wishlist', JSON.stringify(state.wishlist));
        renderProducts();
      }
      if(t.matches('[data-close]')){ closeModal(t.getAttribute('data-close')); }
      if(t.id==='btnCart'){ renderCart(); openDrawer(); }
      if(t.id==='closeCart' || t.id==='overlay'){ closeDrawer(); $$('.modal').forEach(m=>m.classList.remove('show')); }
      if(t.matches('[data-filter]')){ const f = t.getAttribute('data-filter'); applyQuickFilter(f); }
      if(t.id==='btnTheme'){ toggleTheme(); }
      if(t.dataset.auth){ switchAuth(t.dataset.auth); }
      if(t.id==='pmAdd'){
        const btnSel = $$('#pmSizes .btn').find(b=>b.classList.contains('primary'));
        const size = btnSel? btnSel.textContent : (state.selectedProduct?.sizes[0]||'OS');
        state.cart.push({ key: uid(), id: state.selectedProduct.id, qty:1, size });
        renderCart(); openDrawer();
      }
      if(t.id==='pmWish'){
        const id = state.selectedProduct.id;
        const i = state.wishlist.indexOf(id);
        if(i>-1) state.wishlist.splice(i,1); else state.wishlist.push(id);
        localStorage.setItem('wishlist', JSON.stringify(state.wishlist));
        alert(i>-1? 'Removed from wishlist' : 'Added to wishlist');
      }
      if(t.dataset.step){
        const key = t.getAttribute('data-key');
        const step = Number(t.getAttribute('data-step'));
        const item = state.cart.find(x=>x.key===key);
        if(item){ item.qty = Math.max(1, item.qty + step); renderCart(); }
      }
      if(t.dataset.remove){
        const key = t.getAttribute('data-remove');
        state.cart = state.cart.filter(x=>x.key!==key); renderCart();
      }
      if(t.id==='applyCoupon'){
        const code = $('#coupon').value.trim().toUpperCase();
        if(['FEST10'].includes(code)){ state.coupon = code; renderCart(); alert('Coupon applied'); }
        else { alert('Invalid coupon'); }
      }
      if(t.id==='checkoutBtn'){
        alert('Demo checkout: Implement payment gateway (Razorpay/Stripe) and address form.');
      }
      if(t.id==='btnTrack'){
        const id = $('#trackId').value.trim();
        $('#trackResult').textContent = id? `Status for ${id}: In transit · Expected delivery in 2–3 days.` : 'Enter a valid Order ID.';
      }
    });

    $('#loginForm').addEventListener('submit', (e)=>{ e.preventDefault(); alert('Logged in (demo)'); closeModal('authModal'); });
    $('#signupForm').addEventListener('submit', (e)=>{ e.preventDefault(); alert('Account created (demo)'); closeModal('authModal'); });

    $('#btnSearch').addEventListener('click', ()=>{ state.filters.q = $('#searchInput').value.toLowerCase(); renderProducts(); });
    $('#searchInput').addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ state.filters.q = $('#searchInput').value.toLowerCase(); renderProducts(); }});

    $('#clearFilters').addEventListener('click', ()=>{ state.filters={ cats:new Set(), sizes:new Set(), tags:new Set(), min:0, max:3999, q:'', sort: state.filters.sort }; $$('.f-cat,.f-size,.f-tag').forEach(x=>x.checked=false); $('#minPrice').value=0; $('#maxPrice').value=3999; renderProducts(); });

    $$('.f-cat').forEach(cb=> cb.addEventListener('change', ()=>{ cb.checked? state.filters.cats.add(cb.value) : state.filters.cats.delete(cb.value); renderProducts(); }));
    $$('.f-size').forEach(cb=> cb.addEventListener('change', ()=>{ cb.checked? state.filters.sizes.add(cb.value) : state.filters.sizes.delete(cb.value); renderProducts(); }));
    $$('.f-tag').forEach(cb=> cb.addEventListener('change', ()=>{ cb.checked? state.filters.tags.add(cb.value) : state.filters.tags.delete(cb.value); renderProducts(); }));

    $('#applyPrice').addEventListener('click', ()=>{ state.filters.min = Number($('#minPrice').value||0); state.filters.max = Number($('#maxPrice').value||999999); renderProducts(); });
    $('#sortSelect').addEventListener('change', (e)=>{ state.filters.sort = e.target.value; renderProducts(); });

    $('#checkPin').addEventListener('click', ()=>{
      const pin = $('#pincode').value.trim();
      if(/^\d{6}$/.test(pin)) $('#pinMsg').textContent = `Delivery to ${pin}: 3–5 days · COD available`;
      else $('#pinMsg').textContent = 'Enter a valid 6‑digit PIN code';
    });

    // Currency switcher
    $('#currencySelect').value = state.currency;
    $('#currencySelect').addEventListener('change', (e)=>{
      state.currency = e.target.value; localStorage.setItem('currency', state.currency); renderProducts(); renderCart();
    });

    // Tabs in product modal
    $$('#productModal .tabs button').forEach(b=> b.addEventListener('click', ()=>{
      $$('#productModal .tabs button').forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      const map={desc:'Soft, breathable fabric for all‑day comfort.', details:'Material: 100% cotton · Fit: Relaxed · Country: India', care:'Machine wash cold. Do not tumble dry. Iron inside out.'};
      $('#tabContent').textContent = map[b.dataset.tab];
    }));

    // Auth switcher
    function switchAuth(mode){
      $$('#authModal [data-auth]').forEach(x=>x.classList.toggle('active', x.dataset.auth===mode));
      $('#loginForm').classList.toggle('hidden', mode!=='login');
      $('#signupForm').classList.toggle('hidden', mode!=='signup');
    }

    // Theme toggle
    function toggleTheme(){
      const dark = document.documentElement.dataset.theme!=='light';
      if(dark){ document.documentElement.dataset.theme='light'; document.documentElement.style.setProperty('--bg','#f8fafc'); document.documentElement.style.setProperty('--card','#ffffff'); document.documentElement.style.setProperty('--text','#0b0e11'); } 
      else { document.documentElement.dataset.theme='dark'; document.documentElement.style.setProperty('--bg','#0b0e11'); document.documentElement.style.setProperty('--card','#12171d'); document.documentElement.style.setProperty('--text','#f1f5f9'); }
    }

    function applyQuickFilter(token){
      // token: "type:value" e.g., category:Men|T-Shirts or tag:New
      if(!token) return; const [type,val] = token.split(':');
      if(type==='category'){ state.filters.cats = new Set([val]); $$('.f-cat').forEach(cb=> cb.checked = (cb.value===val)); }
      if(type==='tag'){ state.filters.tags = new Set([val]); $$('.f-tag').forEach(cb=> cb.checked = (cb.value===val)); }
      renderProducts(); window.scrollTo({top: document.querySelector('#productGrid').offsetTop - 100, behavior:'smooth'});
    }

    // Global open/close hooks
    $$('[data-open]').forEach(a=> a.addEventListener('click', (e)=>{ e.preventDefault(); openModal(a.getAttribute('data-open')); }));

    // Year footer
    $('#year').textContent = new Date().getFullYear();

    // Initial render
    renderProducts(); renderCart();
  </script>
</body>
</html>
